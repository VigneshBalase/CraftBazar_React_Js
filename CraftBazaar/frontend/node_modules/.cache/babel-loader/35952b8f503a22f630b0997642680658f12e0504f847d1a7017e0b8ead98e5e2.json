{"ast":null,"code":"var _jsxFileName = \"D:\\\\New folder\\\\Project\\\\CraftBazaar\\\\CraftBazaar\\\\frontend\\\\src\\\\pages\\\\Cart.jsx\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport CartItem from '../components/CartItem';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Cart() {\n  _s();\n  const [items, setItems] = useState([]);\n  const navigator = useNavigate();\n  useEffect(() => {\n    getItems();\n  }, []);\n  const getItems = () => {\n    const token = localStorage.getItem('userToken');\n    axios.get('http://localhost:5000/cart/', {\n      headers: {\n        Authorization: token\n      }\n    }).then(response => setItems(response.data)).catch(err => console.error(err));\n  };\n  const updateCartItemQuantity = (itemId, newQuantity) => {\n    // 1️⃣ Update *local* state first for instant UI response\n    setItems(prevItems => prevItems.map(item => item._id === itemId ? {\n      ...item,\n      qty: newQuantity\n    } : item));\n\n    // 2️⃣ Update in DB\n    axios.put('http://localhost:5000/cart/updateQty', {\n      cartId: itemId,\n      qty: newQuantity\n    }).catch(err => {\n      var _err$response;\n      return console.error(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message);\n    });\n  };\n  const calculateTotals = useMemo(() => {\n    let totalProducts = 0;\n    let totalAmount = 0;\n    items.forEach(item => {\n      totalProducts += item.qty;\n      totalAmount += item.price * item.qty;\n    });\n    const gst = totalAmount * 0.18;\n    const totalBill = totalAmount + gst;\n    return {\n      totalProducts,\n      totalAmount,\n      gst,\n      totalBill\n    };\n  }, [items]);\n  const handleOrderNow = async () => {\n    try {\n      const token = localStorage.getItem('userToken');\n      const response = await axios.post('http://localhost:5000/orders', {\n        items: items.map(item => ({\n          productId: item._id,\n          quantity: item.qty,\n          price: item.price,\n          name: item.p_name\n        })),\n        totalAmount: calculateTotals.totalAmount,\n        gst: calculateTotals.gst,\n        totalBill: calculateTotals.totalBill\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n      if (response.status === 201) navigator(`/order/${response.data._id}`);\n    } catch (error) {\n      console.error('Error placing order:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid p-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center fw-normal fst-italic\",\n      children: \"Cart Items\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row p-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-7\",\n        children: items.length === 0 ? /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"fw-normal text-center fst-italic\",\n          children: \"No Items In the cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }, this) : items.map(item => /*#__PURE__*/_jsxDEV(CartItem, {\n          item: item,\n          onQuantityChange: updateCartItemQuantity\n        }, item._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"vr g-0 opacity-100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), items.length !== 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Order Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Total Products: \", calculateTotals.totalProducts]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Total Amount: \\u20B9\", calculateTotals.totalAmount.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"GST (18%): \\u20B9\", calculateTotals.gst.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Total Bill: \\u20B9\", calculateTotals.totalBill.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: handleOrderNow,\n          children: \"Order Now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n}\n_s(Cart, \"jTdBZMzARz29eMtJnEH1w3dlBQw=\", false, function () {\n  return [useNavigate];\n});\n_c = Cart;\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["axios","React","useEffect","useMemo","useState","useNavigate","CartItem","jsxDEV","_jsxDEV","Cart","_s","items","setItems","navigator","getItems","token","localStorage","getItem","get","headers","Authorization","then","response","data","catch","err","console","error","updateCartItemQuantity","itemId","newQuantity","prevItems","map","item","_id","qty","put","cartId","_err$response","message","calculateTotals","totalProducts","totalAmount","forEach","price","gst","totalBill","handleOrderNow","post","productId","quantity","name","p_name","status","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","onQuantityChange","toFixed","onClick","_c","$RefreshReg$"],"sources":["D:/New folder/Project/CraftBazaar/CraftBazaar/frontend/src/pages/Cart.jsx"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport CartItem from '../components/CartItem';\r\n\r\nfunction Cart() {\r\n    const [items, setItems] = useState([]);\r\n    const navigator = useNavigate();\r\n\r\n    useEffect(() => {\r\n        getItems();\r\n    }, []);\r\n\r\n    const getItems = () => {\r\n        const token = localStorage.getItem('userToken');\r\n        axios.get('http://localhost:5000/cart/', {\r\n            headers: { Authorization: token }\r\n        })\r\n            .then((response) => setItems(response.data))\r\n            .catch((err) => console.error(err));\r\n    };\r\n\r\n    const updateCartItemQuantity = (itemId, newQuantity) => {\r\n        // 1️⃣ Update *local* state first for instant UI response\r\n        setItems((prevItems) =>\r\n            prevItems.map((item) =>\r\n                item._id === itemId ? { ...item, qty: newQuantity } : item\r\n            )\r\n        );\r\n\r\n        // 2️⃣ Update in DB\r\n        axios.put('http://localhost:5000/cart/updateQty', {\r\n            cartId: itemId,\r\n            qty: newQuantity,\r\n        })\r\n            .catch((err) => console.error(err.response?.data || err.message));\r\n    };\r\n\r\n    const calculateTotals = useMemo(() => {\r\n        let totalProducts = 0;\r\n        let totalAmount = 0;\r\n\r\n        items.forEach((item) => {\r\n            totalProducts += item.qty;\r\n            totalAmount += item.price * item.qty;\r\n        });\r\n\r\n        const gst = totalAmount * 0.18;\r\n        const totalBill = totalAmount + gst;\r\n\r\n        return { totalProducts, totalAmount, gst, totalBill };\r\n    }, [items]);\r\n\r\n    const handleOrderNow = async () => {\r\n        try {\r\n            const token = localStorage.getItem('userToken');\r\n            const response = await axios.post(\r\n                'http://localhost:5000/orders',\r\n                {\r\n                    items: items.map((item) => ({\r\n                        productId: item._id,\r\n                        quantity: item.qty,\r\n                        price: item.price,\r\n                        name: item.p_name,\r\n                    })),\r\n                    totalAmount: calculateTotals.totalAmount,\r\n                    gst: calculateTotals.gst,\r\n                    totalBill: calculateTotals.totalBill,\r\n                },\r\n                { headers: { Authorization: token } }\r\n            );\r\n            if (response.status === 201) navigator(`/order/${response.data._id}`);\r\n        } catch (error) {\r\n            console.error('Error placing order:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"container-fluid p-3\">\r\n            <h1 className=\"text-center fw-normal fst-italic\">Cart Items</h1>\r\n            <hr />\r\n            <div className=\"row p-3\">\r\n                <div className=\"col-md-7\">\r\n                    {items.length === 0 ? (\r\n                        <h1 className=\"fw-normal text-center fst-italic\">No Items In the cart</h1>\r\n                    ) : (\r\n                        items.map((item) => (\r\n                            <CartItem\r\n                                key={item._id}\r\n                                item={item}\r\n                                onQuantityChange={updateCartItemQuantity}\r\n                            />\r\n                        ))\r\n                    )}\r\n                </div>\r\n                <div className=\"vr g-0 opacity-100\"></div>\r\n                {items.length !== 0 && (\r\n                    <div className=\"col-md-4\">\r\n                        <h2>Order Summary</h2>\r\n                        <p>Total Products: {calculateTotals.totalProducts}</p>\r\n                        <p>Total Amount: ₹{calculateTotals.totalAmount.toFixed(2)}</p>\r\n                        <p>GST (18%): ₹{calculateTotals.gst.toFixed(2)}</p>\r\n                        <hr />\r\n                        <p>Total Bill: ₹{calculateTotals.totalBill.toFixed(2)}</p>\r\n                        <button className=\"btn btn-primary\" onClick={handleOrderNow}>\r\n                            Order Now\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Cart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}